<style>
  closed-comp{border: 5px dashed orange; display: block}
  open-comp{border: 5px dashed green; display: block}
  div{border: 5px dashed blue;}
</style>

<div>
  inside top window
  <open-comp>
    inside open (from outside)
    <closed-comp>inside closed (from outside)</closed-comp>
  </open-comp>
</div>

<div>
  inside top window
  <open-comp>
    inside open (from outside)
    <div id="innerDiv">innerDiv</div>
  </open-comp>
</div>

<script>
  class OpenComp extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({mode: "open"});
      this.shadowRoot.innerHTML = `
        <style>div{border: 5px solid yellow;}</style>
        <div>
          inside open<br>
          <slot></slot>
        </div>
      `;
      this.shadowRoot.addEventListener("click", e => console.log("yellow inside open"));
      this.shadowRoot.addEventListener("click", e => e.stopPropagation());
    }
  }

  class ClosedComp extends HTMLElement {
    constructor() {
      super();
      const shadow = this.attachShadow({mode: "closed"});
      shadow.innerHTML = `
        <style>div{border: 5px solid red;}</style>
        <div>
          inside closed<br>
          <slot></slot>
        </div>
      `;
      shadow.addEventListener("click", e => console.log("red inside closed"));
      // shadow.addEventListener("click", e => e.stopPropagation());
    }
  }

  customElements.define("open-comp", OpenComp);
  customElements.define("closed-comp", ClosedComp);

  const open = document.querySelector("open-comp");
  const closed = document.querySelector("closed-comp");
  const innerDiv = document.querySelector("#innerDiv");
  window.addEventListener("click", e => console.log("blue top window"));
  open.addEventListener("click", e => console.log("green host open"));
  closed.addEventListener("click", e => console.log("orange host closed"));
  innerDiv.addEventListener("click", e => console.log("innerDiv"));
</script>



