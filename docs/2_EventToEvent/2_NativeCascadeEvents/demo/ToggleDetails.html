<div>
  <details>
    <summary>Hello</summary>
    Sunshine!!
  </details>
</div>
<script>

  const div = document.querySelector("div");
  const details = document.querySelector("details");
  const summary = document.querySelector("summary");

  function log(e) {
    console.log(e.type, e.currentTarget.tagName, e.eventPhase, "details is " + (details.open ? "open" : "closed"));
  }

  function preventD(e) {
    console.log("calling: " + e.type + ".preventDefault()");
    e.preventDefault();
  }

  //1. the click event propagates
  div.addEventListener("click", log, true);
  details.addEventListener("click", log, true);
  summary.addEventListener("click", log);
  details.addEventListener("click", log);
  div.addEventListener("click", log);

  //? if we add a task in the event loop here, would it come before the toggle? and would it come before the defaultAction?

  //1b. if we call preventDefault on click, then no change to the DOM and no toggle event
  // div.addEventListener("click", preventD);

  //2. here the defaultAction is done, and we would see the defaultAction having changed the DOM
  //   when the defaultAction is being performed, the toggle event is added to the event loop.

  //3. after the DOM has changed, a toggle event is dispatched.
  div.addEventListener("toggle", log, true);
  details.addEventListener("toggle", log, true);
  summary.addEventListener("toggle", log);    //doesn't work, because the toggle is dispatched on the details as target
</script>

