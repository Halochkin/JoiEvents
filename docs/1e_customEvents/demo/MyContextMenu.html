<h1>Right click (no context menu)</h1>
Right click here will show context menu

<script>
  //1. block all contextmenu events and stops their default actions
  window.addEventListener("contextmenu", function(e){
    e.stopImmediatePropagation();
    e.preventDefault();
  }, true);

  const h1 = document.querySelector("h1");

  function ContextMenuController(mousedownEvent){
    if (mousedownEvent.button !== 2)
      return;

    const myContextMenuEvent = new CustomEvent("my-context-menu", {composed: true, bubbles: true});
    const task1 = setTimeout(function(){
      mousedownEvent.target.dispatchEvent(myContextMenuEvent);
    });
    const task2 = setTimeout(function(){
      alert("this is a bad excuse for a context menu..");
    });
    Object.defineProperty(myContextMenuEvent, "preventDefault", {value: function(){
        clearTimeout(task2);
      }});
  }
  window.addEventListener("mousedown", ContextMenuController, true);

  window.addEventListener("mousedown", e => console.log(e.type));
  window.addEventListener("my-context-menu", e => console.log(e.type));

  h1.addEventListener("my-context-menu", e => e.preventDefault());
</script>