# WhatIs: `<button type="reset">`?

todo
`<button type="submit">` and `<input type="submit">` are more or less identical elements. When the two elements behave the same, we will describe their behavior as using `<button type="submit">` element. When `<input type="submit">` differs from `<button type="submit">`, we will highlight this.

The `<button type="submit">` element is a button to submit a form. To put text on the button, you add it as a text node child: `<button type="submit">Click here!</button>`. To add text to an `<input type="submit">`, the `value` attribute is used: `<input type="submit" value="Click here!">`. 

A third alternative to create a submit button is the `<input type="image" src="...">`. This creates a submit button with the same behavior as the `<button type="submit">` and the `<input type="submit">`, but with an image to replace the normal button presentation.

## Demo: `<button type="submit">`

```html
<form>
  <input type="submit" value="Click me!">
  
  <button type="submit">
    hello 
    <a href="#sunshine">sunshine</a>
    and 
    <span tabindex="0">blue skies!</span>
  </button>
  
  <a href="#world">
    <button type="submit">hello</button>
    world
  </a>
  
  <input type="image" src="https://via.placeholder.com/150" width="50">
  
</form>
<script>
  window.addEventListener("submit", e => e.preventDefault());

  window.addEventListener("keydown", e => console.log(e.type, e.target.tagName, e));
  window.addEventListener("keypress", e => console.log(e.type, e.target.tagName, e));
  window.addEventListener("click", e => console.log(e.type, e.target.tagName, e));
  window.addEventListener("submit", e => console.log(e.type, e.target.tagName, e));
</script>
```

## The default action of `<button type="submit">`

The default action of `<button type="submit">` is to submit a form. More precisely, the default action is to `requestSubmit(theButtonElement)` on the parent `.form` of the submit button.

The default action is triggered by a user-driven `click` event. If there is no `click` event, then there will be no submitting of the form from that button. But. `click` events can be generated by both mouse and keyboard events.

The element should implement this as adding a default action for `keypress` events that will add a default action for that enter. 

todo write up this thing about enter
the problem here is the bad practice on the a href element
1) max make the reset button
2) we make the form element
3) ivar makes the focus event controller  


he `click` event is generated differently for `<a href>` elements and `<button>` and `<input>` elements:
1. If the user presses "Enter" over an `<a href>` element or one of its descendants, then the `click` event is only preceded by a `keydown` event, not a `keypress` event.
2. If the user presses "Enter" over a `<button>`, `<input>`, or other `tabindex` element, then the `click` event is preceded by both a `keydown` and a `keypress` event.
This means that the browser's controller for `click` events need to ensure that the propagation path does not contain an "interactive content" element below the `<a href>` element if it creates a `click` event from the `keydown` event (as this should produce a `keypress` event instead, which then should produce a `click` event to be dispatched on a `target` closer to the `activeElement`).  

## Demo: `<submit-button>`

```html
<script src="../../1d3_defaultAction/demo/addDefaultAction.js"></script>

<script>
  (function () {
    class SubmitButton extends HTMLElement {

      static get observedAttributes() {
        return ["value"];
      }

      constructor() {
        super();
        const shadow = this.attachShadow({mode: "closed"});
        shadow.innerHTML = `<span tabindex="0" style="background-color: lightgrey; border: 1px solid grey; margin: 2px; width: 250px; height: 1.2em;"><slot></slot></span>`;
        this._innerDiv = shadow.children[0];
      }

      get value() {
        return this._innerDiv.innerText;
      }

      set value(newValue) {
        this._innerDiv.innerText = newValue;
      }

      get form() {
        for (let parent = this.parentNode; parent instanceof HTMLElement; parent = parent.parentNode) {
          if (parent instanceof HTMLFormElement)
            return parent;
        }
      }

      set form(ignore) {
        //ignore
      }

      attributeChangedCallback(name, oldValue, newValue) {
        if (name === "value") {
          this.value = newValue;
        }
      }
    }

    customElements.define("submit-button", SubmitButton);

    //monkeyPatch into HTMLFormElement method .requestReset()

    //default action on click on the submit-button or one of its descendants
    window.addEventListener("click", function (e) {
      if ((!e.isTrusted && !e.isTrustedSimulation)|| e.defaultPrevented)
        return;
      for (let el of e.composedPath()) {
        if (el instanceof HTMLElement && el.matches("submit-button")) {
          e.addDefaultAction(() => !e.defaultPrevented && el.form.requestSubmit(/*el*/), {preventable: el});
        }
      }
    }, true);

    //default action on keypress on the submit-button or one of its descendants
    window.addEventListener("keypress", function (e) {
      if (!e.isTrusted|| e.defaultPrevented)
        return;
      for (let el of e.composedPath()) {
        if (el instanceof HTMLElement && el.matches("submit-button")) {
          const clickSimulation = new MouseEvent("click", {composed: true, bubbles: true});
          clickSimulation.isTrustedSimulation = true;
          e.addDefaultAction(() => !e.defaultPrevented && el.dispatchEvent(clickSimulation), {preventable: el});
        }
      }
    }, true);
  })();
</script>

<form>
  <submit-button>
    hello
    <a href="#sunshine">sunshine</a>
    and
    <span tabindex="0">blue skies!</span>
  </submit-button>
  <hr>
  <a href="#world">
    <submit-button>hello</submit-button>
    world
  </a>

</form>
<script>
  //todo test for preventDefault()
  window.addEventListener("submit", e => e.preventDefault());

  window.addEventListener("keydown", e => console.log(e.type, e.target.tagName, e));
  window.addEventListener("keypress", e => console.log(e.type, e.target.tagName, e));
  window.addEventListener("click", e => console.log(e.type, e.target.tagName, e.isTrusted, e.isTrustedSimulation, e));
  window.addEventListener("submit", e => console.log(e.type, e.target.tagName, e));
</script>
```

`click` are generated as a precursor to the default by either mouse events or `keydown`/`keypress` events. The mousedown/mouseup events are a given, but we can also have  or a `keypress` on an `<input>` or `<button>` element. The `target` of the `click` event is not the same as the `target` of the mouse or Keyboard event. 


## References

 * 