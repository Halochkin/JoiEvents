<script>

  //dependency toggleTick todo rename toggleTick nextTick
  Object.defineProperties(HTMLDetailsElement.prototype, {
    requestToggle: {
      value: function () {
        //set pseudo-class??
        (window["toggleTick"] || setTimeout)(() => (this.open = !this.open) & this.dispatchEvent(new Event("toggle")));
      }
    },
    joiGetNativeAction: {
      value: function (e) {
        if (e instanceof MouseEvent && e.isTrusted && e.type === "click" && e.button === 0)
          return () => this.requestToggle();
      }
    },
  });
</script>

<details>
  <summary>hello</summary>
  sunshine
</details>

<script>
  const details = document.querySelector("details");
  // details.addEventListener("click", e => {
  //   e.preventDefault();
  //   const nativeAction = e.currentTarget.joiGetNativeAction(e);
  //   nativeAction();
  // });
  details.addEventListener("click", e=>{
    e.preventDefault();
    e.currentTarget.requestToggle();
  });
</script>